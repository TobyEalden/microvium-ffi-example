#include <iostream>
#include "app_ffi.h"

void print(const char* msg);

int main(int argc, char** argv) {

    uint8_t snapshot[] = {0x06,0x1c,0x06,0x00,0x2e,0x01,0x06,0x9d,0x03,0x00,0x00,0x00,0x1c,0x00,0x1e,0x00,0x2e,0x00,0x2e,0x00,0x34,0x00,0x3a,0x00,0x02,0x01,0x0e,0x01,0xff,0xff,0xff,0xff,0x99,0x00,0xfe,0xff,0xcd,0x00,0xfd,0xff,0xcd,0x00,0xfc,0xff,0xcd,0x00,0x0d,0x01,0x09,0x01,0x01,0x00,0x4d,0x00,0x45,0x00,0x3d,0x00,0x05,0x40,0x70,0x75,0x73,0x68,0x00,0x00,0x04,0x40,0x6c,0x6f,0x67,0x00,0x00,0x00,0x26,0x40,0x4e,0x6f,0x74,0x20,0x61,0x76,0x61,0x69,0x6c,0x61,0x62,0x6c,0x65,0x20,0x6f,0x6e,0x20,0x74,0x68,0x69,0x73,0x20,0x68,0x6f,0x73,0x74,0x20,0x28,0x64,0x65,0x74,0x61,0x63,0x68,0x65,0x64,0x29,0x00,0x0e,0x40,0x48,0x65,0x6c,0x6c,0x6f,0x2c,0x20,0x57,0x6f,0x72,0x6c,0x64,0x21,0x00,0x02,0x60,0x00,0x00,0x0d,0x50,0x04,0x31,0x30,0x30,0x88,0x1d,0x00,0x6b,0x12,0x6f,0x67,0x01,0x60,0x00,0x2f,0x50,0x05,0x88,0x19,0x00,0x89,0x01,0x00,0x88,0x1d,0x00,0x6b,0xa0,0x88,0x19,0x00,0x06,0xa0,0x10,0x12,0xe0,0x70,0x04,0x67,0x67,0x01,0x60,0x89,0x01,0x00,0x10,0x12,0x6b,0x11,0x78,0x01,0xa0,0x67,0x10,0x10,0x07,0x6c,0x10,0xa2,0x67,0x67,0x76,0xe2,0x00,0x00,0x00,0x05,0x50,0x02,0x31,0x32,0x6b,0x60,0x00,0x0d,0x50,0x04,0x89,0x02,0x00,0x89,0x00,0x00,0x88,0x45,0x00,0x12,0x6f,0x60,0x00,0x13,0x50,0x04,0x89,0x00,0x00,0x10,0x88,0x45,0x00,0x6b,0x11,0x88,0x75,0x00,0x78,0x02,0xa0,0x67,0x01,0x60,0x00,0x00,0x00,0x05,0x50,0x00,0x88,0x4d,0x00,0x61,0x00,0x0c,0x00,0x16,0x00,0x85,0x00,0x02,0x00,0x19,0x00,0x01,0x00,0x08,0xc0,0x05,0x00,0x05,0x00,0x3d,0x00,0x89,0x00,0x08,0xc0,0x05,0x00,0x05,0x00,0x45,0x00,0xfd,0x00,0x04,0xd0,0x1c,0x00,0x0b,0x00,0x04,0xe0,0xd5,0x00,0xe5,0x00};

    // Restore the VM from the snapshot
    app_restore(snapshot, sizeof(snapshot));

//    auto resourceObj = mvm_newObject();
//    mvm_Value propValue = mvm_newString(app_vm, "Toby", 4);
//    mvm_setProp(resourceObj, "name", propValue);

    mvm_newObject();

    // Clean up
    app_free();

    return 0;
}

void print(const char* msg) { std::cout << msg << std::endl; }

